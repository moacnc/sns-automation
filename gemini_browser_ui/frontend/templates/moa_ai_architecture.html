<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOA AI Architecture - System Overview</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <style>
        .architecture-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background: linear-gradient(135deg, #0d1117 0%, #161b22 100%);
        }

        .architecture-header {
            padding: 32px 40px;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--bg-secondary);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .back-btn:hover {
            background-color: var(--bg-primary);
            border-color: var(--accent-color);
            transform: translateX(-2px);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
        }

        .user-name {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .logout-btn {
            padding: 8px 16px;
            background-color: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .logout-btn:hover {
            background-color: var(--bg-tertiary);
            border-color: var(--danger-color);
            color: var(--danger-color);
        }

        .architecture-title {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .architecture-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .architecture-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
        }

        .content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
        }

        .section {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 32px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .section-icon {
            font-size: 32px;
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .section-content {
            font-size: 15px;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .architecture-diagram {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 32px;
            margin: 24px 0;
            text-align: center;
        }

        .diagram-layer {
            background-color: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
            margin: 16px 0;
            transition: all 0.3s;
        }

        .diagram-layer:hover {
            border-color: var(--accent-color);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(88, 166, 255, 0.1);
        }

        .layer-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .layer-description {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 24px;
        }

        .component-card {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
            transition: all 0.3s;
        }

        .component-card:hover {
            border-color: var(--accent-color);
            box-shadow: 0 4px 16px rgba(88, 166, 255, 0.1);
        }

        .component-icon {
            font-size: 28px;
            margin-bottom: 12px;
        }

        .component-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .component-description {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 16px;
        }

        .tech-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .tech-badge:hover {
            border-color: var(--accent-color);
            background-color: rgba(88, 166, 255, 0.1);
        }

        .flow-arrow {
            font-size: 24px;
            color: var(--accent-color);
            margin: 12px 0;
        }

        @media (max-width: 768px) {
            .architecture-header {
                padding: 20px;
            }

            .architecture-title {
                font-size: 28px;
            }

            .architecture-content {
                padding: 20px;
            }

            .section {
                padding: 20px;
            }

            .component-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="architecture-container">
        <!-- Header -->
        <div class="architecture-header">
            <div class="header-content">
                <div class="header-top">
                    <a href="/" class="back-btn">
                        <span>â†</span>
                        <span>Back to Chat</span>
                    </a>
                    <div class="user-info">
                        <img id="userAvatar" class="user-avatar" src="" alt="User" style="display: none;">
                        <span id="userName" class="user-name"></span>
                        <button class="logout-btn" onclick="logout()">Logout</button>
                    </div>
                </div>
                <h1 class="architecture-title">ğŸ—ï¸ MOA AI Architecture</h1>
                <p class="architecture-subtitle">
                    MOA (Mixture of Agents) ì‹œìŠ¤í…œì˜ ì „ì²´ ì•„í‚¤í…ì²˜ì™€ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.
                </p>
            </div>
        </div>

        <!-- Content -->
        <div class="architecture-content">
            <div class="content-wrapper">
                <!-- System Overview -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-icon">ğŸ¯</span>
                        <h2 class="section-title">System Overview</h2>
                    </div>
                    <div class="section-content">
                        <p>
                            MOA AIëŠ” Gemini 2.5 Computer Use APIë¥¼ í™œìš©í•œ AI ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œìœ¼ë¡œ,
                            ì‹¤ì œ ë¸Œë¼ìš°ì €ë¥¼ ì œì–´í•˜ì—¬ ë³µì¡í•œ ì›¹ ì‘ì—…ì„ ìë™í™”í•©ë‹ˆë‹¤.
                            ìì—°ì–´ ëª…ë ¹ì„ ë°›ì•„ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì œì–´í•˜ê³ , ì‹¤ì‹œê°„ìœ¼ë¡œ ì‘ì—… ì§„í–‰ìƒí™©ì„ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                        </p>
                    </div>
                </div>

                <!-- Architecture Diagram -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-icon">ğŸ“Š</span>
                        <h2 class="section-title">Architecture Layers</h2>
                    </div>
                    <div class="architecture-diagram">
                        <div class="diagram-layer">
                            <div class="layer-title">ğŸŒ Frontend Layer</div>
                            <div class="layer-description">
                                HTML5, CSS3, JavaScriptë¡œ êµ¬ì„±ëœ ì‹¤ì‹œê°„ ì›¹ ì¸í„°í˜ì´ìŠ¤<br>
                                Google OAuth ì¸ì¦, HTTP Polling ê¸°ë°˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
                            </div>
                        </div>
                        <div class="flow-arrow">â†“</div>
                        <div class="diagram-layer">
                            <div class="layer-title">ğŸ”§ Backend Layer</div>
                            <div class="layer-description">
                                Flask ì›¹ í”„ë ˆì„ì›Œí¬, RESTful API ì—”ë“œí¬ì¸íŠ¸<br>
                                ì„¸ì…˜ ê´€ë¦¬, OAuth ì¸ì¦, ë¹„ë™ê¸° ì‘ì—… ì²˜ë¦¬
                            </div>
                        </div>
                        <div class="flow-arrow">â†“</div>
                        <div class="diagram-layer">
                            <div class="layer-title">ğŸ¤– AI Agent Layer</div>
                            <div class="layer-description">
                                Gemini 2.5 Computer Use API í†µí•©<br>
                                ìì—°ì–´ ì²˜ë¦¬, ë¸Œë¼ìš°ì € ìë™í™”, ì‘ì—… ì‹¤í–‰
                            </div>
                        </div>
                        <div class="flow-arrow">â†“</div>
                        <div class="diagram-layer">
                            <div class="layer-title">ğŸ–¥ï¸ Browser Control Layer</div>
                            <div class="layer-description">
                                Playwright ê¸°ë°˜ ë¸Œë¼ìš°ì € ì œì–´<br>
                                ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜, DOM ì¡°ì‘, ì´ë²¤íŠ¸ ì‹œë®¬ë ˆì´ì…˜
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Core Components -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-icon">âš™ï¸</span>
                        <h2 class="section-title">Core Components</h2>
                    </div>
                    <div class="component-grid">
                        <div class="component-card">
                            <div class="component-icon">ğŸŒ</div>
                            <div class="component-title">Web Interface</div>
                            <div class="component-description">
                                ì‚¬ìš©ì ì¹œí™”ì ì¸ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ë¡œ AI ì—ì´ì „íŠ¸ì™€ ì‹¤ì‹œê°„ ì†Œí†µ.
                                Google OAuthë¥¼ í†µí•œ ì•ˆì „í•œ ì¸ì¦ ì‹œìŠ¤í…œ.
                            </div>
                        </div>
                        <div class="component-card">
                            <div class="component-icon">ğŸ”</div>
                            <div class="component-title">Authentication</div>
                            <div class="component-description">
                                Google OAuth 2.0 ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ.
                                Flask Sessionì„ í†µí•œ ì„¸ì…˜ ê´€ë¦¬ ë° ì‚¬ìš©ì ì •ë³´ ë³´í˜¸.
                            </div>
                        </div>
                        <div class="component-card">
                            <div class="component-icon">ğŸ¤–</div>
                            <div class="component-title">AI Agent</div>
                            <div class="component-description">
                                Gemini 2.5 Computer Use APIë¥¼ í™œìš©í•œ ì§€ëŠ¥í˜• ì—ì´ì „íŠ¸.
                                ìì—°ì–´ ëª…ë ¹ ì´í•´ ë° ë³µì¡í•œ ì›¹ ì‘ì—… ìˆ˜í–‰.
                            </div>
                        </div>
                        <div class="component-card">
                            <div class="component-icon">ğŸ®</div>
                            <div class="component-title">Browser Controller</div>
                            <div class="component-description">
                                Playwright ê¸°ë°˜ ë¸Œë¼ìš°ì € ìë™í™” ì‹œìŠ¤í…œ.
                                í´ë¦­, ì…ë ¥, ìŠ¤í¬ë¡¤ ë“± ëª¨ë“  ë¸Œë¼ìš°ì € ì‘ì—… ì œì–´.
                            </div>
                        </div>
                        <div class="component-card">
                            <div class="component-icon">ğŸ“¡</div>
                            <div class="component-title">Real-time Updates</div>
                            <div class="component-description">
                                HTTP Polling ë°©ì‹ì˜ ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸.
                                ì‘ì—… ì§„í–‰ìƒí™©, ì—ì´ì „íŠ¸ ë©”ì‹œì§€ ì‹¤ì‹œê°„ ì „ì†¡.
                            </div>
                        </div>
                        <div class="component-card">
                            <div class="component-icon">ğŸ“Š</div>
                            <div class="component-title">Task Manager</div>
                            <div class="component-description">
                                ì‘ì—… í ê´€ë¦¬ ë° ì‹¤í–‰ ì œì–´.
                                ë™ì‹œ ì‘ì—… ë°©ì§€, ì‘ì—… ìƒíƒœ ì¶”ì  ë° ê²°ê³¼ ë°˜í™˜.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Technology Stack -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-icon">ğŸ› ï¸</span>
                        <h2 class="section-title">Technology Stack</h2>
                    </div>
                    <div class="section-content">
                        <h3 style="color: var(--text-primary); margin-bottom: 16px; font-size: 18px;">Frontend</h3>
                        <div class="tech-stack">
                            <span class="tech-badge">ğŸŒ HTML5</span>
                            <span class="tech-badge">ğŸ¨ CSS3</span>
                            <span class="tech-badge">âš¡ JavaScript (ES6+)</span>
                            <span class="tech-badge">ğŸ“± Responsive Design</span>
                        </div>

                        <h3 style="color: var(--text-primary); margin: 24px 0 16px; font-size: 18px;">Backend</h3>
                        <div class="tech-stack">
                            <span class="tech-badge">ğŸ Python 3.11+</span>
                            <span class="tech-badge">ğŸŒ¶ï¸ Flask</span>
                            <span class="tech-badge">ğŸ” Authlib (OAuth)</span>
                            <span class="tech-badge">ğŸ“¦ Flask-Session</span>
                            <span class="tech-badge">ğŸŒ Flask-CORS</span>
                        </div>

                        <h3 style="color: var(--text-primary); margin: 24px 0 16px; font-size: 18px;">AI & Automation</h3>
                        <div class="tech-stack">
                            <span class="tech-badge">ğŸ¤– Gemini 2.5 API</span>
                            <span class="tech-badge">ğŸ­ Playwright</span>
                            <span class="tech-badge">ğŸ§  Computer Use API</span>
                        </div>

                        <h3 style="color: var(--text-primary); margin: 24px 0 16px; font-size: 18px;">Infrastructure</h3>
                        <div class="tech-stack">
                            <span class="tech-badge">â˜ï¸ Google Cloud Run</span>
                            <span class="tech-badge">ğŸ³ Docker</span>
                            <span class="tech-badge">ğŸ”§ Environment Variables</span>
                            <span class="tech-badge">ğŸ“ Logging (Loguru)</span>
                        </div>
                    </div>
                </div>

                <!-- Data Flow -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-icon">ğŸ”„</span>
                        <h2 class="section-title">Data Flow</h2>
                    </div>
                    <div class="section-content">
                        <ol style="padding-left: 20px; line-height: 2;">
                            <li><strong>ì‚¬ìš©ì ì…ë ¥:</strong> ì›¹ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ìì—°ì–´ ëª…ë ¹ ì…ë ¥</li>
                            <li><strong>ì¸ì¦ í™•ì¸:</strong> Flask Sessionì„ í†µí•œ ì‚¬ìš©ì ì¸ì¦ ê²€ì¦</li>
                            <li><strong>API ìš”ì²­:</strong> RESTful APIë¥¼ í†µí•´ ë°±ì—”ë“œë¡œ ëª…ë ¹ ì „ì†¡</li>
                            <li><strong>ì‘ì—… í:</strong> Task Managerê°€ ì‘ì—…ì„ íì— ë“±ë¡ ë° ì‹¤í–‰</li>
                            <li><strong>AI ì²˜ë¦¬:</strong> Gemini 2.5 APIê°€ ëª…ë ¹ì„ ë¶„ì„í•˜ê³  ì‘ì—… ê³„íš ìˆ˜ë¦½</li>
                            <li><strong>ë¸Œë¼ìš°ì € ì œì–´:</strong> Playwrightê°€ ì‹¤ì œ ë¸Œë¼ìš°ì €ì—ì„œ ì‘ì—… ìˆ˜í–‰</li>
                            <li><strong>ì§„í–‰ìƒí™© ì—…ë°ì´íŠ¸:</strong> ì‹¤ì‹œê°„ìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œì— ìƒíƒœ ì „ì†¡</li>
                            <li><strong>ê²°ê³¼ ë°˜í™˜:</strong> ì‘ì—… ì™„ë£Œ í›„ ê²°ê³¼ë¥¼ ì‚¬ìš©ìì—ê²Œ í‘œì‹œ</li>
                        </ol>
                    </div>
                </div>

                <!-- Security Features -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-icon">ğŸ”’</span>
                        <h2 class="section-title">Security Features</h2>
                    </div>
                    <div class="component-grid">
                        <div class="component-card">
                            <div class="component-icon">ğŸ”</div>
                            <div class="component-title">OAuth 2.0 ì¸ì¦</div>
                            <div class="component-description">
                                Google OAuthë¥¼ í†µí•œ ì•ˆì „í•œ ì‚¬ìš©ì ì¸ì¦.
                                ë¹„ë°€ë²ˆí˜¸ë¥¼ ì €ì¥í•˜ì§€ ì•Šê³  Googleì´ ì¸ì¦ ê´€ë¦¬.
                            </div>
                        </div>
                        <div class="component-card">
                            <div class="component-icon">ğŸ—ï¸</div>
                            <div class="component-title">ì„¸ì…˜ ê´€ë¦¬</div>
                            <div class="component-description">
                                Flask-Sessionì„ í†µí•œ ì•ˆì „í•œ ì„¸ì…˜ ê´€ë¦¬.
                                íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ë°˜ ì„¸ì…˜ ì €ì¥ì†Œ ì‚¬ìš©.
                            </div>
                        </div>
                        <div class="component-card">
                            <div class="component-icon">ğŸ”‘</div>
                            <div class="component-title">API Key ë³´í˜¸</div>
                            <div class="component-description">
                                í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•œ API í‚¤ ê´€ë¦¬.
                                ì½”ë“œì— í•˜ë“œì½”ë”©í•˜ì§€ ì•Šì•„ ë³´ì•ˆ ê°•í™”.
                            </div>
                        </div>
                        <div class="component-card">
                            <div class="component-icon">ğŸ›¡ï¸</div>
                            <div class="component-title">CORS ì„¤ì •</div>
                            <div class="component-description">
                                Flask-CORSë¥¼ í†µí•œ êµì°¨ ì¶œì²˜ ìš”ì²­ ì œì–´.
                                ìŠ¹ì¸ëœ ë„ë©”ì¸ë§Œ API ì ‘ê·¼ í—ˆìš©.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Future Enhancements -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-icon">ğŸš€</span>
                        <h2 class="section-title">Future Enhancements</h2>
                    </div>
                    <div class="section-content">
                        <ul style="padding-left: 20px; line-height: 2;">
                            <li><strong>ì›¹ì†Œì¼“ í†µí•©:</strong> HTTP Pollingì„ WebSocketìœ¼ë¡œ ëŒ€ì²´í•˜ì—¬ ë” íš¨ìœ¨ì ì¸ ì‹¤ì‹œê°„ í†µì‹ </li>
                            <li><strong>ì‘ì—… íˆìŠ¤í† ë¦¬:</strong> ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í†µí•œ ì‘ì—… ë‚´ì—­ ì €ì¥ ë° ê²€ìƒ‰</li>
                            <li><strong>ë‹¤ì¤‘ ë¸Œë¼ìš°ì € ì§€ì›:</strong> Chrome, Firefox, Safari ë“± ë‹¤ì–‘í•œ ë¸Œë¼ìš°ì € ë™ì‹œ ì œì–´</li>
                            <li><strong>ìŠ¤ì¼€ì¤„ë§:</strong> ì£¼ê¸°ì ì¸ ì‘ì—… ìë™ ì‹¤í–‰ ê¸°ëŠ¥</li>
                            <li><strong>í˜‘ì—… ê¸°ëŠ¥:</strong> ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— ì‘ì—…ì„ ê³µìœ í•˜ê³  ëª¨ë‹ˆí„°ë§</li>
                            <li><strong>ê³ ê¸‰ AI ê¸°ëŠ¥:</strong> ë©€í‹°ëª¨ë‹¬ ì…ë ¥, ìŒì„± ëª…ë ¹, ì´ë¯¸ì§€ ê¸°ë°˜ ì‘ì—… ì§€ì‹œ</li>
                            <li><strong>ì„±ëŠ¥ ìµœì í™”:</strong> ìºì‹±, CDN í™œìš©, ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Load user info
        async function loadUserInfo() {
            try {
                const response = await fetch('/api/user');
                const data = await response.json();

                if (data.logged_in) {
                    document.getElementById('userName').textContent = data.user.name;
                    if (data.user.picture) {
                        const avatar = document.getElementById('userAvatar');
                        avatar.src = data.user.picture;
                        avatar.style.display = 'block';
                    }
                } else {
                    window.location.href = '/login';
                }
            } catch (error) {
                console.error('Failed to load user info:', error);
                window.location.href = '/login';
            }
        }

        // Logout
        function logout() {
            window.location.href = '/logout';
        }

        // Initialize
        loadUserInfo();
    </script>
</body>
</html>
